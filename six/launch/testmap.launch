<launch>
  <!-- Tham số cho Gazebo -->
  <arg name="world_name" default="$(find six)/worlds/testmap.world" />
  <arg name="paused" default="false" />
  <arg name="use_sim_time" default="true" />
  <arg name="gui" default="true" />
  <arg name="headless" default="false" />
  <arg name="debug" default="false" />

  <!-- Khởi động Gazebo với world mới -->
  <node name="gazebo" pkg="gazebo_ros" type="gzserver" respawn="false" output="screen"
        args="$(arg world_name) --verbose -u $(arg paused)">
    <param name="use_sim_time" value="$(arg use_sim_time)" />
  </node>

  <!-- Khởi động GUI Gazebo -->
  <node if="$(arg gui)" name="gazebo_gui" pkg="gazebo_ros" type="gzclient" respawn="false" output="screen" />

  <!-- Load URDF -->
  <param name="robot_description" textfile="$(find six)/urdf/six.urdf"/>
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <!-- Spawn robot -->
  <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" 
        args="-urdf -model six -param robot_description -x 0 -y 0 -z 5"/>

  <!-- Gmapping -->
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
    <param name="base_frame" value="base_link"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_frame" value="map"/>
    <param name="scan_topic" value="/scan"/>
    <param name="delta" value="0.05"/>
    <param name="maxUrange" value="5.0"/>
  </node>

  <!-- Boustrophedon -->
  <node name="boustrophedon" pkg="six" type="boustrophedon.py" output="screen"/>

  <!-- RViz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find six)/rviz/gmapping.rviz"/>
</launch>
